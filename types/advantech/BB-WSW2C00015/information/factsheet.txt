=== WISE-6610 & BB-WSW Series Configuratioon Guide_20210504.pdf ===
LoRaWAN
Gateway & Node
Configuration Guide
2
LRPv (BB-WSW) Node
Setup Guide
Before to Start – Download the Tool You Need
3
Physical Connection Overview
LRPV2
Connector
Connect to
Console
PWR & Sensor
Connector
Please connect the PC and node with the Micro USB cable. (Micro USB)
The following address direct you to the USB driver if you need it.
https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-
vcp-drivers 4
Physical Connection for RS485(Modbus RTU) SKU
Connector
Brown Red Pink Yellow Green Blue White Gray
8 7 6 5 4 3 2 1
D- D+ NC NC NC NC GND PWR
9~36VDC
BB-WSW2C00015-1
LoRaWAN node w/RS485, external antenna (915MHz)
BB-WSW2C00015-2
LoRaWAN node w/RS485, external antenna (868MHz)
BB-WSW2C00015-3
LoRaWAN node w/RS485, external antenna (923MHz)
5
Physical Connection for AIDIDO SKU 1/2
Connector 1
Brown8 Red Pink Yellow Green Blue White Gray
7 6 5 4 3 2 1
GND AI4 GND AI3 GND AI2 GND AI1
Connector 2
GND DO GND DI2 GND DI1 V- V+ 9~36VDC
BB-WSW2C42100-1 LoRaWAN node
4 x AI, 2 x DI, 1 x DO, conduit, external antenna (915 MHz)
Connector 2
BB-WSW2C42100-2 LoRaWAN node
4 x AI, 2 x DI, 1 x DO, conduit, external antenna (868 MHz)
Connector 1
BB-WSW2C42100-3 LoRaWAN node
4 x AI, 2 x DI, 1 x DO, conduit, external antenna (923 MHz)
6
Physical Connection for AIDIDO SKU 2/2
There are 4 DIP switch for switching
the mode between current and volt
---switch all DIP to the right(Current)
---switch all DIP to the left (Volt)
BB-WSW2C42100-1 LoRaWAN node
4 x AI, 2 x DI, 1 x DO, conduit, external antenna (915 MHz)
BB-WSW2C42100-2 LoRaWAN node
4 x AI, 2 x DI, 1 x DO, conduit, external antenna (868 MHz)
BB-WSW2C42100-3 LoRaWAN node
4 x AI, 2 x DI, 1 x DO, conduit, external antenna (923 MHz)
7
LoRaWAN Node Utility 1/5
After to connect the computer with the node via the
console connector, it’s feasible to execute the utility
and configure the node.
The default login password is “admin”.
8
LoRaWAN Node Utility 2/5
9
LoRaWAN Node Utility 3/5
Radio settings for EU/US SKU
10
LoRaWAN Node Utility 4/5
Under sensor Page, you can configure the sensor node parameter.
(AIDIDO SKU)
The DI Wakeup Trigger can
setup Low to High or High to
Low trigger.
With the LoRa chipset limitation,
the minimum uplink interval should be higher
than 15 sec
11
LoRaWAN Node Utility 5/5
For RS485 (ModbusRTU SKU)
By default setting, it supports 6 read rule.
Each of the rule can read 3 Modbus address(fc:3)
It can read up to 23 address(fc:3) when speeding up the LoRa data rate.
12
6610
WISE- Setup
Guide
GW Setting
Physical Connection Guide – WISE-6610
LoRaWAN gateway Pin Definition
Red Yellow Black Grey
PWR+ DI GND DO
9~36VDC
15
WISE-6610 Overview 1) UM Access
GUI
Default IP is 192.168.1.1
ID/PW: root/root
Menu > Customization > User Module > LoRaWAN
GW
17
WISE-6610 Overview 2) RF Setting
1. Enable radio & Decide the uplink channel
2. No need to input downlink channel. The network server decide the downlink
channel based on the uplink packets
3. Feasible to press Quick Setup to choose the channel
WISE-6610 Overview 3) RF Setting
Choose the channel according to the LoRa node spec
19
WISE-6610 Overview 4) Network Server Setting
Direct the LoRaWAN GW to a network server
Since WISE-6610 supports network server feature,
You can direct the data to WISE-6610(127.0.0.1)
itself.
20
WISE-6610 Overview 5) GW MQTT Setting
WISE-6610 supports MQTT broker to process the
data handled by the network server.
21
WISE-6610 Overview 6) Status Checking
Raw data is received after to enable the LoRaWAN radio, you can check if
wireless functions well in this page.
22
WISE-6610 Overview 7) Network Server Link
After configuring the LoRaWAN setting, please go to LoRaWAN
server(network server) to create the data processing rule on Network server
23
Network Server Setting
Network Server Configuration – Assign the Gateway
1. Please assign the LoRaWAN GW to network server
2. Please leave the Tx chain as 0 (according to WISE6610’s HW spec)
25
Network Server Configuration – Assign the Network
1. Define the network frequency for the network server
2. There are 4 setting(EU/AU/AS/US) are pre-configured by
default. All the parameter are complying with LoRaWAN
regulation.
26
Network Server Configuration – Create the handler
> Configure the handler
> Define what information you want to receive
> It’s a rule for the network server to process data
27
Network Server Configuration – Configure the Handler
Define what information you want to receive
28
Network Server Configuration – Setup the Data Connector
Define how to process the data after to the network server
decrypts the data
Example: Through MQTT
In this example : We save the Topic on localhost’s MQTT
broker
1. Publish Uplink(MQTT topic) for Rx
2. Receive topic (MQTT topic) for Tx
29
Network Server Configuration – Configure the Connector
30
Network Server Configuration – Create Profiles for Nodes
Here, we are starting to configure the LoRa node setting
The target is to pair the handler with the network
frequency for the LoRa node
31
Network Server Configuration – Configure Profiles
To configure the nodes, you need to pair the
handler with the network frequency through
profile setting
Can Join is the option for OTAA setting
Assign Rx1 or Rx2 for the node to receive Tx
Generally, we suggest leave it in AUTO
32
Network Server Configuration – Create Node’s Rule
Please add(configure) the node according to your node’s
type
For ABP type (Ex: Advantech LRPv2 node default setting),
please choose Activated(Nodes)
Please choose the profile
and input DevAddr/
NwkSkey/AppSKey
33
Network Server Configuration – ABP Nodes
On these fields, it will record how
many packets it receives and sends
Also, it shows which gateway receives
the data from this node
34
Network Server Configuration – OTAA Nodes
For OTAA nodes, please configure it through Commissioned
OTAA
Please choose the profile
and input DevEUI/
AppEUI/AppSKey
35
Network Server Configuration – Check Receiving Frames
You can verify if the LoRaWAN network server functions well.
Please check it through “receive frame“
36
Send Tx Frames
send Tx frames to the nodes via the Web UI
send Tx frames to the nodes via MQTT message
e.g. Class A node {"data":"11”,"port":13}
e.g. Class C node {"data":"11","time":"immediately","port":13}
Configure the tx port according to the node
Network server will not resend
the message even it’s dropped
Application Server
Setting
Node-RED Setting 1/4
Since the message are already delivered through MQTT,
you can use any MQTT software to receive the node data.
Or, going to Node-RED to receive the node data
39
Node-RED Setting 2/4
Enable Node-RED on WISE-6610 1880 port
40
Node-RED Setting 3/4
Access http://{WISE-6610_IP}:1880
ID/PW: root/root
41
Node-RED Setting 4/4
You can receive the LoRa node data after to
complete the network server setting. This MQTT
topic shows the raw sensor data
42
Application for Advantech LRPv2 Nodes 1/4
If you have one more App argument setting, you can receive Advantech sensor
data which already be classified.
Please ensure the Application server is enabled and go for “App
argument“ setting
43
Application for Advantech LRPv2 Nodes 2/4
Go to node setting and insert the App Arguments ”Advantech” for BB-WSW node
44
Application for Advantech LRPv2 Nodes 3/4
> Make sure the handler equips the above items, it’s the item
for filtering Advantech BB-WSW nodes
45
Application for Advantech LRPv2 Nodes 4/4
Once the setting is done, the application on the gateway allows you monitor
and manage Advantech nodes. It doesn’t support other nodes come from
other vendor.
If LoRaWAN node is BB-WSW node, it’s feasible to manage
and configure it on WISE-6610’s application server
46
Subscribe the Data which had been Filtered
MQTT topic “Advantech/{DevAddr}/data”
47
Application Server
Modbus TCP
Modbus TCP Mapping 1/3
If you have Application Server enabled. Also, having App argument setting
“Advantech” for BB-WSW node. There is a new ModbusTCP mapping function to
bridge the sensor data (RS485/AI/DI/DO) with your SCADA system.
RS485
AI/DI/DO
Sensor
Query data
SCADA
Modbus Master
Response
Modbus Slave
IP:192.168.1.1 IP:192.168.1.2
49
Modbus TCP Mapping 2/3
Please add the node info and map the slave ID to the BB-WSW node.
We prepare the Modbus Address Table for mapping with the input on BB-WSW
node(see next page).
1. Only Class A type for AI/DI/DO SKU
2. Class A/C was supported on RS485 SKU. If you choose Class C, the Modbus
Table will follow the original Modbus address on the sensor. So you can query
the sensor directly.
50
Modbus TCP Mapping 3/3
Please refer to this FAQ:
What is the Modbus Address definition of BB Wzzard on WISE-6610
https://www.advantech.com/support/details/faq?id=1-21ZCCS1
51
Application Server
Payload Engine
A Local Decoder in The Edge
The Answer is “YES”
Can WISE-6610 support
It’s feasible to decode the data payload
decoding the LoRaWAN
through “Node-RED” or the “payload engine”
sensor raw data payload ?
53
Payload Engine Helps You Define The Decoder For Sensors
Application server > Payload Engine
54
Target: Readable Payload
55
Steps of Adding Payload Engine
Please assign/edit different payload engine name for the different sensor type
2
1
3
The sensor’s App Arguments is the
ID which should match with the
payload engine name 56
Add Payload Engine / Payload Engine Format
Ignore 234 11 434 (Dec)
(Hex)
57
Advanced Payload Engine Format
Using “arithmetic”
for the complicated
calculation.
It will do the
calculation in the
order of your
parameter.
So, it will do +, - ,*
then / in this example.
58
Appendix
How To Have The Local Time in Received Frames
Make sure the UM 2
1 Set the Local Time
version is over
1.0.19
3 Erase the Cookies of the Browser
Go to Received Frames
4
Choose the Local Timezone


=== BB-WSW.pdf ===
Startup
Guide
LoRaWAN Node BB-WSW Series
Industrial LoRaWAN Node
NCC
Certification
根據NCC低功率電波輻射性電機管理辦法規定：
CE
第十二條 經型式認證合格之低功率射頻電機，非經
許可，公司、商號或使用者均不得擅自變更頻率、
This product has passed the CE test for
加大功率或變更原設計之特性及功能。
environmental specifications. Test conditions for 第十四條 低功率射頻電機之使用不得影響飛航安全
passing included the equipment being operated
及干擾合法通信；經發現有干擾現象時，應立即停
within an industrial enclosure. In order to protect
用，並改善至無干擾時方得繼續使用。前項合法通
the product from being damaged by ESD
信，指依電信法規定作業之無線電通信。低功率射頻
(Electrostatic Discharge) and EMI leakage, we 電機須忍受合法通信或工業、科學及醫療用電波輻射
strongly recommend the use of CE-compliant 性電機設備之干擾。
industrial enclosure products.
FCC Class A Package List
• 1 x Industrial LoRaWAN node
Note: This equipment has been tested and
found to comply with the limits for a Class • 1 x Antenna
A digital device, pursuant to part 15 of the • 1 x Cable (BB-WSW2C42 with 2 x cable)
FCC Rules. These limits are designed to
provide reasonable protection against harmful Overview
interference when the equipment is operated
in a commercial environment. This equipment
generates, uses, and can radiate radio
frequency energy and, if not installed and used 1
in accordance with the instruction manual,
may cause harmful interference to radio
communications. Operation of this equipment
Intelligent Edge Node - Wireless LoRa
in a residential area is likely to cause harmful
advantech-bb.com
interference in which case the user will be 4 2
required to correct the interference at his own Status/Sleep/Reset Status
expense.
This device complies with Part 15 of the FCC
Rules. Operation is subject to the following two
conditions: 3
(1) This device may not cause harmful
interference, and No Item
(2) this device must accept any interference 1 Antenna slot
received, including interference that may cause
2 Status LED
undesired operation.
3 Cable conduit
Caution: Any changes or modifications not
expressly approved by the party responsible for 4 Status/Sleep/Reset button
compliance could void the user’s authority to
Buttons and LED
operate this equipment. This transmitter must
not be co-located or operating in conjunction The device includes a multifunction button. The
with any other antenna or transmitter. various functions are described as follows:
This equipment complies with FCC radiation • Operation mode: Press the button to send
exposure limits set forth for an uncontrolled modbus/sensor data via LoRaWAN.
environment. This equipment should be installed • Press and hold the button for 5 seconds until
and operated with minimum distance 20 cm the LED starts to blink to reboot the device.
between the radiator & your body. • Press and hold the button for 15 seconds
until the LED continues blinking to reset the
device to factory default settings.
7. Open the operating system’s Device
Configuring the LoRaWAN
Manager. Go to Start > Control Panel >
It is recommended to configure the LoRaWAN Device Manager and select COM & LPT
before installing in a permanent location. port entry.
The following procedure is written for a 8. Click the drop-down menu to select the
Windows operating system. installed COM port and click Apply.
1. Locate the screws securing the device cap
and remove them.
2. Remove the cap to expose the internal
connectors.
3. A type A male to micro B USB cable is
required for the following step. Connect
the micro USB connector to the slot on the
The LoRa Wzzard Utility displays as shown
device.
in the following figure.
4. Power up the target computer and allow it
to boot up completely.
5. Connect the remaining end to a USB slot
on a computer.
6. Once the device and computer are
connected, the computer detects the
USB connection and a virtual COM port is For further information about the LoRa
created. Wzzard Utility, refer to “Starting the
In the event that the USB connection is LoRaWAN Node Utility”.
not detected by the operating system, use Once the device is configured, it can be
the following instructions to download and disconnected from the computer to prepare
install the required driver: it for installation on the selected site. After
the device is installed and connected to
■ Open a browser and navigate to the
respective sensor, the LoRa Wzzard Utility
following website: https://www.silabs.
is then used to customize system, device,
com/products/interface/usb-bridges/
and radio settings and connect it to the
classic-usb-bridges/device.cp2104.
Internet/network.
■ For Windows 7/8 operating systems,
9. Disconnect the USB cable from the slot on
download the CP210x_Windows_
the device.
Driver.
10. Replace the cap on the device and secure
■ For Windows 10 operating systems,
it with the screws if it is necessary at this
download the CP210x_Universal_
time.
Windows_Driver
See “Hardware Installation” to continue.
■ After downloading, install the driver on
the computer.
NOTE: you may be required to obtain
administrator privilege to install.
4. Connect the sensor cables to the
Hardware Installation
connectors on the device.
Step one, wall mounting:
■ Node with AI/DI/DO
1. Locate the area to install and mark the
four screw locations. If necessary, drill pilot
holes. Connector 1
If installing in concrete, it is recommended
to use wall sinks. Connect
2. Align the LoRaWAN to the holes on the to sensor
location and secure with the screws.
Connector 2
Intelligent Eaddgvaen tNecohd-beb .-c oWmirel S e ta s t s u L s oRa
Status/Sleep/Reset
■ Node with RS485
Step two, routing data cables:
Connect
3. Insert the sensor cable through the channel
to power
on the device.
and
NOTE: Position the cable connector so that
sensor
it can be connected to the board.
5. Align the top cover with the base and install
while gently pulling the data cable slack.
If there is resistance when pulling, do not
pull the cable further to avoid damaging the
connector.
6. Secure the top cover with the screws.
Connect to sensor
Intelligent E a d d g va e n t N ec o h d -b e b . - c o W m irel S e ta s t s u L s oRa
Status/Sleep/Reset
Step three, installing the antenna:
7. Connect the antenna by rotating the
antenna connector in a clockwise direction.
Intelligent Ea dd g va en t N ec oh d -b eb . -c o Wmirel S e ta s t s u L s oRa
Status/Sleep/Reset
NOTE: Positioning of antenna is crucial for
effective wireless connectivity.
PIN Definition
The following pin definitions are for the cables
supported by the listed LoRaWAN devices:
• Node with AI/DI/DO
■ BB-WSW2C42100-1 (915 MHz)
■ BB-WSW2C42100-2 (868 MHz)
■ BB-WSW2C42100-3 (923 MHz)
Connector 1 Connector 2
PIN Color
Definition Definition
1 Grey AI1 PWR
2 White GND V-
3 Blue AI2 DI1
4 Green GND GND
5 Yellow AI3 DI2
6 Pink GND GND
7 Red AI4 DO
8 Brown GND GND
• Node with RS485
■ BB-WSW2C00015-1 (915 MHz)
■ BB-WSW2C00015-2 (868 MHz)
■ BB-WSW2C00015-3 (923 MHz)
PIN Color Definition
1 Grey PWR
2 White V-
3 Blue NC
4 Green NC
5 Yellow NC
6 Pink NC
7 Red D+
8 Brown D-
Starting the LoRaWAN Node Utility
System Page
The System page displays the BB-WSW node information.
Right click on the System page to select reboot the BB-WSW node, reset BB-WSW node or upgrade
the firmware.
Item Description
Model Name Display the model name of the device.
Version Display the current firmware version of the device.
Device Description Display the description of the device.
LoRaWAN Page
The LoRaWAN page allows users to configuration the LoRaWAN settings.
Item Description
Join Mode Click the drop-down menu to select the LoRaWAN join mode.
Click the radio button to enable the mechanism for optimizing data rates,
ADR
airtime and energy consumption in the network.
Click the radio button to enable the function that confirm the transmission
Tx Confirm
is success or not via a ACK frame from remote LoRaWAN receiver.
Click the drop-down menu to select the number of retransmission that
Tx Retry Number
LoRaWAN sender considers the transmission failed.
Join Mode is ABP
Device Address Display the 4 bytes hexadecimal device address of end device.
Application Session Enter the key used for encryption and decryption of the LoRaWAN packet
Key payload.
Item Description
Network Session Key Enter the key used to check the validity of messages (MIC check).
Join Mode is OTAA
Device EUI Display the 8 bytes hexadecimal unique identifier of end device.
Enter the 8 bytes hexadecimal unique identifier of the application provider
Application EUI
of the end device.
Application Key Enter the key used to derive the session keys.
Radio
The Radio page allows users to configuration the LoRa Radio settings.
Item Description
Display the LoRaWAN radio band for different region: AS923, EU868, or
Band
US915.
RF Power (dBm) Display the output power of the radio.
Click the drop-down menu to select the settings of LoRa Spreading Factor
Data Rate (SF), Bandwidth and Data Rate. LoRa operates with SF from 7 to 12. SF7
is the shortest time on air, SF12 is the longest time.
Enter the LoRa channel frequency. The frequency range for the radio band
is as following:
Channel Frequency • AS923: 920,000,000 ~ 925,000,000 Hz.
(Hz) • EU868: 863,000,000 ~ 870,000,000 Hz.
• US915: The frequency of channel is fixed.
Each channel frequency needs to be separated by more than 200,000 Hz.
Channel Selection Click the check box to select the LoRa channel to use.
Sensor
Digital/Analog Input
The Digital/Analog Input page allows users to configuration the DI/AI settings.
Item Description
Interval of Sync. Enter the value to define the interval defines how often the LRPv2 node
Sensor Data (sec.) reads DI/AI data.
Set the setting for the analog inputs:
• Mode: Click the drop-down menu to select AI measure mode.
Analog Input • Negative: Click the check box to set enable if the analog input may be
negative value possibly.
• Value: Display the analog input value.
Set the setting for the digital inputs:
Digital Input • Enable: Click the check box to enable to read DI data or not.
• Value: Display the digital input value.
Digital Output
The Digital Output page allows users to configuration the DO settings.
Item Description
Digital Output Click the radio button to write a High or Low value to a digital pin.
Modbus
UART
The UART page allows users to configuration the UART settings. The UART settings must to match
with the settings on the attached Modbus RTU device.
Item Description
Click the drop-down menu to select the transmission speeds of the
Baud Rate
connected devices.
Click the drop-down menu to select the method of detecting errors in
Parity
transmission.
Click the drop-down menu to select the number of data bits in each
Data Bits
character.
Click the drop-down menu to select the end of every character allows the
Stop Bits
receiving signal hardware to detect the end of a character.
Modbus RTU Read
The Modbus RTU Read page allows users to configuration the Modbus Read settings.
Item Description
Enable Click the check box to enable the Modbus Read command function.
Slave ID Enter the value to define the unique unit address of Modbus slave.
Item Description
Click the drop-down menu to select the master device delivers packets
Function Code to the slave device containing instructions as defined in the function code
fields.
Address Enter to designate the read from starting address for the Modbus registry.
Enter to designate the number of read cycles. Each function code has
different quantity range.
• 01: 1 ~ 32
Quantity
• 02: 1 ~ 32
• 03: 1 ~ 23
• 04: 1 ~ 23
Enter the value to specify the frequency with which the Modbus command
Polling Time (ms)
is re-issued.
Enter the value to specify the time duration in milliseconds for the LRPv2
Modbus Timeout (ms)
node to wait for a response after it has issued a command.
Modbus RTU Write
The Modbus RTU Write page allows users to configuration the Modbus Write settings.
Item Description
Slave ID Enter the value to define the unique unit address of Modbus slave.
Click the drop-down menu to select the master device delivers packets
Function Code to the slave device containing instructions as defined in the function code
fields.
Address Enter to designate the write from starting address for the Modbus registry.
Enter to designate the number of write cycles. Each function code has
different quantity range.
Quantity
• 05: 1
• 06: 1
Value Enter the value to specify the value written to Modbus Slave.
Write Click Apply to write the settings to Modbus RTU.
Device Payload
Common
Common Uplink
ACK
When device receive setting frame from LoRaWAN network server, the device will send ACK frame
to network server, representing the device has set setting frame.
FPort: 64
Bytes 1 1 2
Sport Ret Checksum
• Sport: Previous setting frame FPort
• Ret: 0x0 is successful and 0x1 is unsuccessful
• Checksum: Previous setting frame checksum
Common Downlink
System Set
System set frame can set system command to device include reboot or reset to default.
FPort: 9
Bytes 1
cmd
• cmd: 0x1 is reboot and 0x2 is reset to default
BB-WSW2C00015
Uplink
Modbus Uplink Data
Modbus uplink data length is not fixed, it depend on Modbus payload, can be 6 to 51 bytes.
FPort: 5
Bytes 1 2 1 1 Not Fixed (1-46)
ID Addr FL TR Payload
• ID: Modbus slave ID
• Addr: Modbus address
• FL: Function code and payload length
• TR: Transactions and return code
• Payload: Modbus payload from Modbus sensor
bits 3 5
Function Length
• Function: Modbus function code
• Length: this frame payload length, unit is words or bits depend on function code
bits 4 4
Transactions Return
• Transactions: device transactions index
• Return: if return is 1, representing Modbus protocol is timeout
Downlink
Modbus Transactions Set
WSW2C00015 can set Modbus transaction from remote.
FPort: 5
Bytes 1 1 1 2 2 1
Tran En ID Addr Poll FL
• Tran: A number representing index of Modbus transactions, can be 1 ~ 6
• En: Representing whether Modbus transactions is enable or disable, can be 1 or 0
• ID: Representing slave ID used for Modbus transactions, can be 1 ~ 247 or 255
• Addr: Representing slave address used for Modbus transactions, can be 1 ~ 65535
• Poll: Representing polling interval time, can be 1 ~ 65535, unit is 10 secs
• FL: Function code and payload length
bits 3 5
Function Length
• Modbus function code, can be 1 ~ 4
• Length: Representing read length used for Modbus transactions , can be 1 ~ 32 (FC is 1 or 2)
and 1 ~ 23 (FC is 3 or 4)
Modbus Write
Bytes 1 1 2 Not Fixed (1-46)
ID FC Addr Payload
• ID: Modbus slave ID
• FC: Function code, can be 5 or 6
• Addr: Modbus slave address
• Payload: Write Data
• Example:
ID FC Addr Payload
coil 01 05 0001 01
register 01 06 0001 0001
BB-WSW2C42100
Uplink
Sensor Uplink Data
FPort: 6
Bytes 2 2 2 2 2 1
AI1_R AI2_R AI3_R AI4_R AIM DIDO
• AI[N]_R: Analog input [N] Raw data, can be 0 to 65535
• AIM: Analog input mode
Bits 1 3 1 3
AI4_NEG AI4_MODE AI3_NEG AI3_MODE
Bits 1 3 1 3
AI2_NEG AI2_MODE AI1_NEG AI1_MODE
■ AI[N]_MODE: Representing analog input [N] operate mode
AI[N]_MODE
0 Disable
1 10V
2 5V
3 1V
4 20mA
■ AI[N]_ENG: Representing analog input [N] whether support negative value, can be 0 or 1.
• DIDO: Digital input and digital output
Bits 2 1 1 1 1 1 1
reserve DO1_E DO1_A DI2_E DI2_V DI1_E DI1_V
■ DI[N]_V: Digital input [N] data, can be 0 or 1.
■ DI[N]_E: Digital input [N] enable or disable, can be 0 or 1.
■ DO1_A: Digital output 1 on or off, can be 0 or 1.
■ DO1_E: Digital output 1 enable or disable, can be 0 or 1.
Example: FF010000ABCD020194013E
AI1 Raw Data: 0xFF01 (65281)
AI2 Raw Data: 0x0000 (0)
AI3 Raw Data: 0xABCD (43981)
AI4 Raw Data: 0x0201 (513)
AI mode: 0x9401
AI4 Eng: 1
AI4 mode: 1 (001b)
AI4 Rang: -10 V ~ 10 V
AI4 = -10 + ((10 - (-10)) / 65535) * 513 = -9.8434 V
AI3 Eng : 0
AI3 mode: 4 (100b)
AI3 Rang: 0 mA ~ 20 mA
AI3 = 0 + ((20 - (0)) / 65535) * 43981 = 13.4221 mA
AI2 Eng: 0
AI2 mode : 0 (0b)
AI2 is disable
AI1 Eng: 0
AI1 mode : 1(1b)
AI1 Rang: 0 V ~ 10 V
AI1 = 0 + ((10 - (0)) / 65535) *6 5281 = 9.9612 V
DIDO: 0x3E (0011 1110 b)
Bits 2 1 1 1 1 1 1
reserve DO1_E DO1_A DI2_E DI2_V DI1_E DI1_V
Value 00 1 1 1 1 1 0
3E 3 E
DI1_V: 0
DI1_E: 1
DI2_V: 1
DI2_E: 1
DO1_A: 1 ON
DO1_E: 1
Downlink
Interval Set
FPort: 7
Bytes 1 2
reserve Interval
• Interval: Representing polling interval time, 1 ~ 65535, 10 sec. units
• Example:
reserve interval
10sec 00 0001
Digital Output Set
FPort: 13
Bytes 1 2
Action reserve
• Action: Signifies if digital output is on or off
• Example:
action reserve
Do on 01 00
Do off 00 00
• Isolation: None
Specifications
• Channels: 2ch
Power
Digital Outputs
• Internal: Two 3.6-V 2500-mAh lithium AA
• Voltage Range: 0 ~ 30 V
batteries DC
• Output Type: Open drain
• Optional: External input 9 ~ 36 V
DC • Output Current: 100 mA max
Mechanical
• Protection: Current limit protection
• Physical Connection: 12.7 mm (0.5”) • Isolation: None
conduit, sensor interface cable included;
Analog Inputs
8-wire, 26-gage, 1.8 m (70.87”)
• Sensor Inputs: • Input Range: ±10 V DC , ±5 V DC , ±1 V DC ,
0 ~ 20 mA
■ Analog input: ±10 V , ±5 V , ±1 V ,
0 ~ 20 mA DC DC DC • Resolution: 16 bit
■ Digital input: 0 ~ 48 V • Input Load Resistance: 10MΩ (voltage),
DC 120Ω (current)
■ Digital output: 0 ~ 30 V
• Optional External Antenn D a C : RP-SMA, • Accuracy:
omnidirectional, 1.5 dBi, 868 ~ 915 MHz; ■ ±0.1% (voltage) at 25°C
length, 170 mm (6.69”) ■ ±0.2% (current) at 25°C
• Mounting: Magnetic mounting via an Serial Communication
internal magnet Holding force, 2.13 kg
(4.7 lbs); four mounting ears, M5 (#10) • Port Type: RS485
• Enclosure: IP66-rated, fiber-reinforced • No. of Ports: 1
polyester PBT • Protocol: Modbus RTU
• Weight: 0.4 kg (0.88 lbs) • Data Bits: 8
Technology • Stop Bits: 1, 2
• Parity: None, odd, even, space, mark
• Wireless: LoRaWAN 868/915/923 MHz
• Baud Rate: 2400 ~ 115200 bps
• LED: Network connectivity
• Serial Signals: Data+, Data-
Environmental • Protection: Built-in 15 kV ESD protection
for all signals
• Installation: Indoor or outdoor
• Operating Temperature: -40°C ~ 75°C Console for Configuration
(-40°F ~ 167°F)
• Port Type: Micro USB
• Storage Temperature: -40°C ~ 85°C
• No. of Ports: 1
(-40°F ~ 185°F)
• Data Bits: 8
• Operating Humidity: 10 ~ 95%
• Stop Bits: 1
noncondensing
• Parity: None
Digital Inputs
• Baud Rate: 115200 bps
• Voltage Range: • Serial Signals: TxD, RxD
■ Dry contact : Logic level 0: close to Regulatory Approvals
GND
• Shock: IEC60068-2-27
■ Logic level 1: open
• Free Fall: IEC60068-2-32
■ Wet contact:
Logic level 0: 0 ~ 1 V • Vibration: IEC60068-2-6
DC
Logic level 1: 3 ~ 30 V DC For more information on this and other Advantech products,
• V : 0.8 V (max) please visit our website at:
IL
• V : 2 V (min) http://www.advantech.com/products/
IH
• Pull-Up Current: 32 μA For technical support and service:
• Type: Source/Sink (PNP/NPN) software- http://www.advantech.com/support/
selectable input © 2019 Advantech Co., Ltd.


=== Wzzard-LRPv2-Node_DS(121720)20201231113719.pdf ===
Wzzard LRPv2 Node
Industrial LoRaWAN Node
Features
 Long-range wide area IoT application
 Optional solar or battery power input for low power consumption
 LoRaWAN protocol for closed and public system applications
 Provides connectivity to industry-standard analog or digital sensors
 Rugged, IP66-rated, fiber-reinforced polyester PBT enclosure
RoHS
COMPLIANT
2002/95/EC
Introduction
The Wzzard LRPv2 LoRaWAN node intelligent sensor platform enables you to quickly and easily create a complete connectivity stack between your sensors and applications via a
network or the Internet. The platform uses intelligent edge nodes and a wireless LoRaWAN network to transmit analog or digital signals or Modbus RTU sensor data to a WISE-6610
LoRaWAN gateway or other LoRaWAN-compliant gateway device. The Wzzard LRPv2 LoRaWAN node can accommodate virtually any industry standard external sensors. Connections
can be made via either conduit fittings or cable glands. This line of nodes provides various sensor interface options including digital I/O as well as general purpose analog inputs.
Specifications
Power Digital Inputs
 Internal Two 3.6-V 2500-mAH lithium AA batteries*  Voltage Range Dry contact : Logic level 0: close to GND
(BB-WSW2C42100-X Only) Logic level 1: open
 Optional External Input 9 ~ 36 V DC Wet contact : Logic level 0: 0 ~ 1 V DC
Logic level 1: 3 ~ 30 V
DC
Mechanical  V 0.8 V (max.)
IL
 Physical Connection 12.7-mm (1/2") conduit, sensor interface cable  V 2 V (min.)
IH
included; 8-wire, 26-gage, 1.8-m (6’)  Pull-Up Current 32 μA
 Sensor Inputs Analog input (±10 V DC , ±5 V DC , ±1 V DC , 0 ~ 20 mA),  Type Source/sink (PNP/NPN) software-selectable input
digital input (0 ~ 48 V )
DC  Isolation None
digital output (0 ~ 30 V )
DC  Channels 2ch
 Optional External Antenna RP-SMA, omnidirectional, 1.5 dBi, 868 ~ 915
MHz; length, 170 mm (6.69") Digital Outputs
 Mounting Magnetic mounting via an internal magnet
 Voltage Range 0 ~ 30 V
Holding force, 2.13 kg (4.7 lbs); four mounting DC
 Output Type Open drain
ears, M5 (#10)
 Output Current 100 mA max
 Enclosure IP66-rated, fiber-reinforced polyester PBT
 Protection Current limit protection
 Weight 400 g
 Isolation None
Technology
Analog Inputs
 Wireless LoRaWAN 868/915/923 MHz
 Input Range ±10 V , ±5 V , ±1 V , 0 ~ 20 mA,
 LED Network connectivity DC DC DC
 Resolution 16 bit
Environmental  Input Load Resistance 10MΩ (voltage), 120 Ω (current)
 Installation Indoor or outdoor  Accuracy ±0.1% (Voltage) at 25 °C
 Operating Temperature -40 to 75°C (-40 to 167°F) ±0.2% (Current) at 25 °C
 Storage Temperature -40 to 85°C (-40 to 185°F)
 Operating Humidity 10 ~ 95% non-condensing
Note: 2-year battery life based on condition of data transmission frequency with one time per hour
Industrial Ethernet Solutions
All product specifications are subject to change without notice. Last updated: 17-Dec-2020
Wzzard LRPv2 Node
Dimensions
Unit: mm [inch]
BB-WSW2CXXXXX-X
Ø95.25 [3.750]
65.34 [2.572] Ø5.59
[0.220]
Outline Dimension: 95.25 x 65.15 x 115.9 [3.75 x 2.56 x 4.56]
Serial Communication Ordering Information
 Port Type RS-485
 BB-WSW2C00015-1 LoRaWAN node w/RS485, external antenna (915MHz)
 No. of Ports 1
 BB-WSW2C00015-2 LoRaWAN node w/RS485, external antenna (868MHz)*
 Protocol Modbus RTU
 BB-WSW2C00015-3 LoRaWAN node w/RS485, external antenna (923MHz)
 Data Bits 8
 BB-WSW2C42100-1 LoRaWAN node with power monitoring, 4 x AI, 2 x DI,
 Stop Bits 1, 2
1 x DO, conduit, external antenna (915 MHz)
 Parity None, odd, even, space, mark
 BB-WSW2C42100-2 LoRaWAN node with power monitoring, 4 x AI, 2 x DI,
 Baud Rate 2400 ~ 115200 bps 1 x DO, conduit, external antenna (868 MHz)*
 Serial Signals Data+, Data-  BB-WSW2C42100-3 LoRaWAN node with power monitoring, 4 x AI, 2 x DI,1
 Protection Built-in 15-kV ESD protection for all signals x DO, conduit, external antenna (923 MHz)
*SKU with RED Compliance
Console for Configuration
 Port Type Micro USB
 No. of Ports 1
 Data Bits 8
 Stop Bits 1
 Parity None
 Baud Rate 115200 bps
 Serial Signals TxD, RxD
Regulatory Approvals
 Shock IEC60068-2-27
 Free Fall IEC60068-2-32
 Vibration IEC60068-2-6
Online Download www.advantech.com/products
]465.4[39.511 ]057.3[
52.59Ø
]797.03[
42.02
]418.3[
68.69
]565.2[
51.56


=== <_io.TextIOWrapper name='experiment/advantech/BB-WSW2C00015/information/example payloads.txt' mode='r' encoding='utf-8'> ===
The Wzzard LRPv2 LoRaWAN node intelligent sensor platform enables you to quickly and easily create a complete connectivity stack between your sensors and applications via a network or the Internet. The platform uses intelligent edge nodes and a wireless LoRaWAN network to transmit analog or digital signals or Modbus RTU sensor data to a WISE-6610 LoRaWAN gateway or other LoRaWAN-compliant gateway device. The Wzzard LRPv2 LoRaWAN node can accommodate virtually any industry standard external sensors. Connections can be made via either conduit fittings or cable glands. This line of nodes provides various sensor interface options including digital I/O as well as general purpose analog inputs.
### AV400-BRI-EU // Advantech BB-WSW2C00015-2 —>

`000000000000000011440a` port 6

`000000000000000011440a` port 6

`11000000000000000000` port 11


=== Additional Factsheet (web search)===
The Advantech BB-WSW2C00015 is an industrial LoRaWAN node equipped with an RS485 interface for Modbus RTU sensor integration. It supports various LoRaWAN frequency plans including 868MHz (EU868), 915MHz (US915), and 923MHz (AS923). The device operates as a LoRaWAN end-node and can function in LoRaWAN Class A and Class C modes, particularly for its RS485 SKU.

### Sensors

The Advantech BB-WSW2C00015 is designed to connect to external Modbus RTU sensors via its RS485 port. It acts as a Modbus master, polling connected Modbus slave devices.

### Transmitted Data

The device transmits Modbus RTU sensor data over the LoRaWAN network. The minimum uplink interval for sensor data transmission is constrained by the LoRa chipset and must be greater than 15 seconds.

### Transmission Method

Data transmission occurs via the LoRaWAN protocol. The node communicates with a LoRaWAN gateway, such as the Advantech WISE-6610, which then forwards the data to a network server. The device supports both ABP (Activation By Personalization) and OTAA (Over-The-Air Activation) join modes.

### Payload Details and Decoding

Advantech provides mechanisms within its WISE-6610 LoRaWAN gateway, including a "Payload Engine" that uses JSON format to define and parse device payloads, as well as support for JavaScript and Python decoders. For data to be processed by the gateway's application server, the node's "App Arguments" must match the `appname` defined in the Payload Engine's JSON configuration. Processed data can then be subscribed to via an MQTT topic, such as `Advantech/{DevAddr}/data`.

The payload structure for the BB-WSW2C00015 is detailed for specific FPorts:

*   **Common Uplink (ACK)**
    *   **FPort**: 64
    *   **Payload**:
        *   `Byte 1`: `Sport` (Previous setting frame FPort)
        *   `Byte 1`: `Ret` (Return code: `0x0` for successful, `0x1` for unsuccessful)
        *   `Bytes 2`: `Checksum` (Previous setting frame checksum)

*   **Common Downlink (System Set)**
    *   **FPort**: 9
    *   **Payload**:
        *   `Byte 1`: `cmd` (Command: `0x1` for reboot, `0x2` for reset to default)

*   **Modbus Uplink Data**
    *   **FPort**: 5
    *   **Payload**:
        *   `Byte 1`: `ID` (Modbus slave ID)
        *   `Bytes 2`: `Addr` (Modbus address)
        *   `Byte 1`: `FL` (Function code and payload length)
            *   `Bits 3`: `Function` (Modbus function code)
            *   `Bits 5`: `Length` (This frame's payload length, unit in words or bits depending on function code)
        *   `Byte 1`: `TR` (Transactions and return code)
            *   `Bits 4`: `Transactions` (Device transactions index)
            *   `Bits 4`: `Return` (Return code: `1` if Modbus protocol timed out)
        *   `Bytes 1-46` (Not Fixed): `Payload` (Modbus payload from Modbus sensor)

*   **Modbus Transactions Set (Downlink)**
    *   **FPort**: 5
    *   **Payload**:
        *   `Byte 1`: `Tran` (Index of Modbus transactions, 1-6)
        *   `Byte 1`: `En` (Enable/disable transaction: `1` for enable, `0` for disable)
        *   `Byte 1`: `ID` (Slave ID for Modbus transactions, 1-247 or 255)
        *   `Bytes 2`: `Addr` (Slave address for Modbus transactions, 1-65535)
        *   `Bytes 2`: `Poll` (Polling interval time, 1-65535 in 10-second units)
        *   `Byte 1`: `FL` (Function code and payload length)
            *   `Bits 3`: `Function` (Modbus function code, 1-4)
            *   `Bits 5`: `Length` (Read length for Modbus transactions: 1-32 for FC 1 or 2; 1-23 for FC 3 or 4)

*   **Modbus Write (Downlink)**
    *   **FPort**: 5
    *   **Payload**:
        *   `Byte 1`: `ID` (Modbus slave ID)
        *   `Byte 1`: `FC` (Function code, 5 or 6)
        *   `Bytes 2`: `Addr` (Modbus slave address)
        *   `Bytes 1-46` (Not Fixed): `Payload` (Write data)

### Example Payloads

The provided `example payloads.txt` includes the following:

*   `000000000000000011440a` on `port 6`
*   `11000000000000000000` on `port 11`

**Note on Discrepancy**: The official Advantech documentation (factsheet) specifies FPort 5 for Modbus-related data for the BB-WSW2C00015 model. FPort 6 is documented for the BB-WSW2C42100 (AI/DI/DO SKU) as "Sensor Uplink Data." FPort 11 is not mentioned in any official documentation for the BB-WSW2C00015 found during research. Therefore, the meaning of payloads on FPort 6 and FPort 11 for the BB-WSW2C00015 cannot be definitively decoded based on available official Advantech documentation.

### Reference Decoders

Advantech offers a "Payload Engine" within its WISE-6610 LoRaWAN gateway for decoding payloads using a JSON-based format. While a specific JavaScript or Python decoder *code* for a generic LoRaWAN Network Server for the BB-WSW2C00015's FPort 5 Modbus uplink payload was not found on public Advantech support pages or GitHub during the search, the principles outlined in the payload details above would be used to construct such a decoder.

An example of a conceptual JSON decoder structure for the Advantech WISE-6610 Payload Engine, based on the `Modbus Uplink Data` on `FPort 5`, would look similar to this (as derived from Advantech's Payload Engine documentation and the factsheet's payload definition):

